{% extends 'base.html.twig' %}

{% block title %}Hello ProfilController!{% endblock %}

{% block body %}
{{ dump(profil) }}

    <div class="container-fluid">
        <div class="row">
            <!-- Infos col -->
            <div class="col-12 col-lg-4 col-xl-3">

                <div class="card">
                    <div class="card-body">

                        <div class="row text-center">
                            <div class="col-12 my-3">
                                <img src="{{ profil.pictureUrl }}" alt="{{ profil.firstname }} {{ profil.lastname }}" class="profil-picture">
                            </div>
                            <div class="col-12">
                                <h2 class="fs-4">{{ profil.firstname }} {{ profil.lastname|upper }}</h2>
                            </div>
                            <div class="col-12">
                                <p class="text-danger mb-0">Emploi</p>
                                <em class="text-muted">Expérience actuelle ? Pas de date de fin ?</em>
                            </div>
                        </div>

                        <div class="row">

                            <!-- Adresse -->
                            <div class="col-12 my-3">
                                <p class="mb-0">Adresse</p>
                                <small class="dg-1">{{ profil.adresse }}</small>
                            </div>

                            <!-- Code Postal -->
                            <div class="col-12 my-3">
                                <p class="mb-0">Code Postal</p>
                                <small class="dg-1">{{ profil.zipCode }}</small>
                            </div>

                            <!-- Ville -->
                            <div class="col-12 my-3">
                                <p class="mb-0">Ville</p>
                                <small class="dg-1">{{ profil.city }}</small>
                            </div>

                            <!-- Date Anniversaire -->
                            <div class="col-12 my-3">
                                <p class="mb-0">Anniversaire Apside</p>
                                <small class="dg-1">{{ profil.apsideBirthday|date('d-m-Y') }}</small>
                            </div>

                            <!-- Email -->
                            <div class="col-12 my-3">
                                <p class="mb-0">Email</p>
                                <small class="dg-1">{{ profil.email }}</small>
                            </div>

                            <!-- Téléphone -->
                            <div class="col-12 my-3">
                                <p class="mb-0">Téléphone</p>
                                <small class="dg-1">{{ profil.phone }}</small>
                            </div>

                            <!-- Compétences Principales -->
                            <div class="col-12 my-3">
                                <p class="mb-1">Compétences Principales</p>
                                <span class="badge rounded-pill bg-light text-dark p-2 m-1">Php</span>
                                <span class="badge rounded-pill bg-light text-dark p-2 m-1">Pyhton</span>
                                <span class="badge rounded-pill bg-light text-dark p-2 m-1">Symfony</span>
                                <span class="badge rounded-pill bg-light text-dark p-2 m-1">Php</span>
                                <span class="badge rounded-pill bg-light text-dark p-2 m-1">Pyhton</span>
                                <span class="badge rounded-pill bg-light text-dark p-2 m-1">Symfony</span>
                            </div>

                        </div>
                    </div>
                </div>
            </div>

            <div class="col-12 col-lg-8 col-xl-9">
                <ul class="nav nav-pills mb-3" id="pills-tab" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active" id="skill-tab" data-bs-toggle="tab" data-bs-target="#skill" type="button" role="tab" aria-controls="skill" aria-selected="true">Compétences</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="missions-tab" data-bs-toggle="tab" data-bs-target="#missions" type="button" role="tab" aria-controls="missions" aria-selected="false">Historique des missions</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="fichiers-tab" data-bs-toggle="tab" data-bs-target="#fichiers" type="button" role="tab" aria-controls="fichiers" aria-selected="false">Fichiers</button>
                    </li>
                </ul>
                <div class="tab-content" id="myTabContent">
                    <div class="tab-pane fade show active" id="skill" role="tabpanel" aria-labelledby="skill-tab">

                        {% for category in categories %}
                            <div class="row g-3">

                                <div class="col-12">
                                    <h4>{{ category.name }}</h4>
                                </div>
                                
                                {% for skill in profil.userSkills %}
                                    {% if category.name == skill.skill.category.name %}
                                        <div class="col">
                                            <div class="card">
                                                <div class="card-body">

                                                    <div class="row">
                                                        <div class="col">
                                                            <h4 class="fs-5">
                                                                {{ skill.skill.name }}

                                                                {% if skill.apprecied == true %}
                                                                    <i class="fas fa-fw fa-heart grape-2"></i>
                                                                {% endif %}
                                                            </h4>
                                                        </div>
                                                        <div class="col text-end">
                                                            <a class="grape-2" href="{{ path ('user_skills_delete', {'user_skill_id': skill.id})}}"><i class="far fa-times"></i></a>
                                                        </div>
                                                    </div>

                                                    <div class="row mt-2">
                                                        <div class="col">
                                                            <div class="progress" style="height: 1.5em;">
                                                                <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" style="width: {{ (skill.level / 5) * 100 }}%" aria-valuenow="{{ skill.level }}" aria-valuemin="0" aria-valuemax="5">{{ skill.level }} / 5</div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    {% endif %}
                                {% endfor %}
                            </div>

                        {% endfor %}

                       


                        
                            
                        </div>
                    
                    </div>
                    <div class="tab-pane fade" id="missions" role="tabpanel" aria-labelledby="missions-tab">...</div>
                    <div class="tab-pane fade" id="fichiers" role="tabpanel" aria-labelledby="fichiers-tab">...</div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
